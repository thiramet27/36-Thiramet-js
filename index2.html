<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="./dist/output.css" rel="stylesheet">
</head>
<body class="pl-10 pr-10">
    <section id="input-form">
        <h1 class="text-3xl font-bold text-center p-10">Product Dashboard</h1>
        <form class="flex flex-col items-center space-y-4 mb-8">
            <!-- Dropdown to select product -->
            <select id="product-select" class="w-full max-w-md p-2 border border-gray-300 rounded-md shadow-sm">
                <option value="" disabled selected>Select a Product</option>
                <option value="Banana" data-price="44" data-url="https://example.com/banana.jpg">Banana</option>
                <option value="Apple" data-price="45" data-url="https://example.com/apple.jpg">Apple</option>
                <option value="Orange" data-price="30" data-url="https://example.com/orange.jpg">Orange</option>
            </select>

            <input
                id="price-input"
                type="number"
                placeholder="Price"
                class="w-full max-w-md p-2 border border-gray-300 rounded-md shadow-sm"
                disabled
            />

            <input
                id="url-input"
                type="url"
                placeholder="Image-URL"
                class="w-full max-w-md p-2 border border-gray-300 rounded-md shadow-sm"
                disabled
            />

            <button 
            id="add-task-btn"
            class="px-6 py-2 bg-blue-500 
            text-white rounded-md hover:bg-blue-600 
            transition duration-300">Create Product
            </button>
        </form>
    </section>
    
    <section id="Dashboard" class="flex flex-col items-center space-y-4 mb-8">
        <h1 class="text-3xl font-bold text-center p-10">Dashboard</h1>
        <div class="flex flex-row gap-x-10 flex-wrap" id="product-list">
        </div>
        <button class="px-6 py-2 bg-blue-500 
            text-white rounded-md hover:bg-blue-600 
            transition duration-300">Add to cart</button>
    </section>

    <section id="cart" class="w-full border border-gray-300 rounded-md shadow-sm pb-4 flex flex-col items-center">
        <h1 class="text-3xl font-bold text-center p-2">Cart</h1>
        <div class="flex flex-row gap-x-10 flex-wrap pb-10" id="cart-list">
        </div>
        <button class="px-6 py-2 bg-blue-500 
            text-white rounded-md hover:bg-blue-600 
            transition duration-300">Calculate</button>
    </section>
    <br>
</body>
<script>
    const productSelect = document.getElementById("product-select");
    const taskPrice = document.getElementById("price-input"); 
    const taskUrl = document.getElementById("url-input");
	const addTaskBtn = document.getElementById("add-task-btn");

    let product = [];

    // Listen for product selection
    productSelect.addEventListener('change', function() {
        const selectedOption = productSelect.options[productSelect.selectedIndex];
        const price = selectedOption.getAttribute('data-price');
        const url = selectedOption.getAttribute('data-url');

        // Update price and URL input fields based on selection
        taskPrice.value = price;
        taskUrl.value = url;
    });

    function renderProducts() {
        const productList = document.getElementById('product-list');
        productList.innerHTML = ''; // Clear the list before re-rendering

        product.forEach(item => {
            const productCard = document.createElement('div');
            productCard.classList.add('p-4', 'bg-white', 'rounded-lg', 'shadow-md', 'items-center');
            
            const productImg = document.createElement('img');
            productImg.src = item.url;
            productImg.alt = item.Productname;
            productImg.classList.add('w-32', 'h-32', 'object-cover', 'mb-4');
            productCard.appendChild(productImg);

            const productName = document.createElement('h2');
            productName.textContent = item.Productname;
            productName.classList.add('text-xl', 'font-semibold');
            productCard.appendChild(productName);

            const productPrice = document.createElement('p');
            productPrice.textContent = `$${item.Price}`;
            productPrice.classList.add('text-gray-600');
            productCard.appendChild(productPrice);

            const addToCartButton = document.createElement('button');
            addToCartButton.textContent = 'Add to cart';
            addToCartButton.classList.add('mt-4', 'px-4', 'py-2', 'bg-green-500', 'text-white', 'rounded-md', 'hover:bg-green-600', 'transition', 'duration-300');
            productCard.appendChild(addToCartButton);

            productList.appendChild(productCard);
        });
    }

    addTaskBtn.addEventListener("click", (e) => {
        e.preventDefault(); // Prevent form submission reload
        
        const selectedOption = productSelect.options[productSelect.selectedIndex];
        const nproduct = selectedOption.value;
        const pproduct = taskPrice.value;
        const urlproduct = taskUrl.value;

        // Create new product object
        let objarray = {"Productname": nproduct, "Price": pproduct, "url": urlproduct};
        
        // Add new product to the array
        product.push(objarray);

        // Clear the input fields
        productSelect.value = '';
        taskPrice.value = '';
        taskUrl.value = '';

        // Re-render the product list to show the new product
        renderProducts();
    });

    // Initial render
    renderProducts();

</script>
</html>
